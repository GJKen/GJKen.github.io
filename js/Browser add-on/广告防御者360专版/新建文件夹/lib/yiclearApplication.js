!function(n){"use strict";n.YiclearApplication=function(e){this.serviceClient=new n.ClientService,this.framesMap=e},n.YiclearApplication.prototype={YICLEAR_APP_HEADER:"X-Yiclear-Filtered",YICLEAR_RULE_HEADER:"X-Yiclear-Rule",INTEGRATION_MODE_FULL:"FULL",INTEGRATION_MODE_DEFAULT:"DEFAULT",INTEGRATION_MODE_OLD:"OLD",yiclearProductName:null,yiclearAppVersion:null,yiclearIntegrationDetected:!1,checkHeaders:function(e,r,i){this._detectYiclearApplication(e,r,i)},_detectYiclearApplication:function(e,r,i){var t=null;if(i&&null,r)for(var l=0;l<r.length;l++){var a=r[l];if(a.value)switch(a.name){case this.YICLEAR_APP_HEADER:t=a.value;break;case this.YICLEAR_RULE_HEADER:a.value}}if(!t)return this.framesMap.recordYiclearIntegrationForTab(e,!1,!1,!1,null,null,!1),null},parseYiclearRuleFromHeaders:function(e){if(e)for(var r=0;r<e.length;r++){var i=e[r];switch(i.name){case this.YICLEAR_RULE_HEADER:return this._createRuleFromHeader(i.value)}}return null},_createRuleFromHeader:function(e){for(var r=n.FilterRuleBuilder,i=e.split("; "),t=Object.create(null),l=0;l<i.length;l++){var a=i[l].split("=");t[a[0]]=decodeURIComponent(a[1])}return r.createRule(t.rule,t.filterId-0)},shouldOverrideReferrer:function(e){return this.framesMap.isTabyiclearWhiteListed(e)}}}(yiclearAPI);