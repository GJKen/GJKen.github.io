!function(t,e){"use strict";var n,h,_,S,u;t.CssFilterRule=(n=e,h=t.BaseFilterRule,_=n.StringUtils,S=[":active",":checked",":disabled",":empty",":enabled",":first-child",":first-of-type",":focus",":hover",":in-range",":invalid",":lang",":last-child",":last-of-type",":link",":not",":nth-child",":nth-last-child",":nth-last-of-type",":nth-of-type",":only-child",":only-of-type",":optional",":out-of-range",":read-only",":read-write",":required",":root",":target",":valid",":visited",":has",":contains",":matches-css",":matches-css-before",":matches-css-after",":-abp-has",":-abp-contains"],u=[":has(",":contains(",":matches-css(",":matches-css-before(",":matches-css-after(",":-abp-has(",":-abp-contains("],function(t,e){h.call(this,t,e);var n,s=_.contains(t,h.MASK_CSS_INJECT_RULE)||_.contains(t,h.MASK_CSS_EXCEPTION_INJECT_RULE)||_.contains(t,h.MASK_CSS_INJECT_RULE_ABP);s&&(this.isInjectRule=s),s?(this.whiteListRule=_.contains(t,h.MASK_CSS_EXCEPTION_INJECT_RULE),n=this.whiteListRule?h.MASK_CSS_EXCEPTION_INJECT_RULE:h.MASK_CSS_INJECT_RULE):(this.whiteListRule=_.contains(t,h.MASK_CSS_EXCEPTION_RULE),n=this.whiteListRule?h.MASK_CSS_EXCEPTION_RULE:h.MASK_CSS_RULE);var i=t.indexOf(n),a=null;0<i?(a=t.substring(0,i),this.loadDomains(a)):0<t.indexOf(h.MASK_CSS_INJECT_RULE_ABP)&&(n=h.MASK_CSS_INJECT_RULE_ABP,i=t.indexOf(h.MASK_CSS_INJECT_RULE_ABP),a=t.substring(0,i),this.loadDomains(a));var r=!1,l=t.substring(i+n.length);if(!s){var o=function(t){var e=t.indexOf(":");if(e<0)return null;if(0<e&&"\\"==t.charAt(e-1))return null;var n=t.indexOf("[");if(0<=n&&n<e)return null;var s=_.indexOfAny(t,e+1,[" ","\t",">","(","[",".","#",":"]);s<0&&(s=t.length);var i=t.substring(e,s);return i.length<=1?null:{name:i,nameStartIndex:e,nameEndIndex:s}}(l);if(null!=o&&":style"==o.name)s=!0,l=function(t,e){var n=e.substring(0,t.nameStartIndex),s=t.nameStartIndex+t.name.length+1,i=e.length-1;if(i<=s)throw new Error("Empty :style pseudo class: "+e);var a=e.substring(s,i);if(_.isEmpty(n)||_.isEmpty(a))throw new Error("Wrong :style pseudo-element syntax: "+e);return n+" { "+a+" }"}(o,l);else if(null!==o&&S.indexOf(o.name)<0)throw new Error("Unknown pseudo class: "+l)}for(var c=0;c<u.length;c++)0<=l.indexOf(u[c])&&(r=!0);this.isInjectRule=s,this.cssSelector=l,this.extendedCss=r}),t.CssFilterRule.prototype=Object.create(t.BaseFilterRule.prototype)}(yiclearAPI,vAPI);