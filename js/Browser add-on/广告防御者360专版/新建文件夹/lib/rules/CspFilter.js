!function(n,v){"use strict";function s(e){return e?e.whiteListRule&&e.isImportant?4:e.isImportant?3:e.whiteListRule?2:1:0}function p(e,t,u){var n=e.cspDirective,i=u[n],r=s(e),l=s(t),c=s(i),o=Math.max(r,l,c);o===r?u[n]=e:o===l?u[n]=t:o===c&&(u[n]=i)}n.CspFilter=function(e){var a=new n.UrlFilterRuleLookupTable,f=new n.UrlFilterRuleLookupTable;function t(e){for(var t=0;t<e.length;t++)u(e[t])}function u(e){e.whiteListRule?a.addRule(e):f.addRule(e)}return e&&t(e),{addRules:t,addRule:u,removeRule:function(e){e.whiteListRule?a.removeRule(e):f.removeRule(e)},getRules:function(){return a.getRules().concat(f.getRules())},findCspRules:function(e,t,u,n){n=n===v.RequestTypes.SUBDOCUMENT?n:v.RequestTypes.OTHER;var i,r,l=a.findRule(e,t,u,n),c=Object.create(null);if(l)for(i=0;i<l.length;i++){if(!(r=l[i]).cspDirective)return[r];p(r,null,c)}var o=f.findRule(e,t,u,n),s=Object.create(null);if(o)for(i=0;i<o.length;i++)p(r=o[i],c[r.cspDirective],s);var R=[];return Object.keys(s).forEach(function(e){R.push(s[e])}),R}}}}(yiclearAPI,vAPI);