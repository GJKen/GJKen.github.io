!function(I,o){"use strict";I.filterClasses={createFilter:function(e,t,i,r,l,n,a,s,o,c){var u=new I.YiclearFilter(e);return u.name=t,u.nickname=i,u.description=r,u.enabled=l,u.installed=n,u.lastUpdateTime=a,u.RuleCount=s,u.subscriptionUrl=o,u.version=c,u},getAllyiclearFilters:function(e){var t=o.AntiBannerFiltersId,i=o.LocalStorage,r=[],l=e.getGroups(),n=i.getItem("filters-state");n=n?JSON.parse(n):null,r.push(this.createFilter(t.USER_FILTER_ID,"","")),r.push(this.createFilter(t.WHITE_LIST_FILTER_ID,"",""));for(var a=0;a<l.length;a++){var s=l[a];s.title=s.title||s.name,n&&n[s.filterId]?r.push(this.createFilter(s.filterId,s.title,s.nickname,s.specialization,n[s.filterId].enabled,n[s.filterId].installed,s.lastUpdateTime,s.RuleCount,s.subscriptionUrl,s.version)):r.push(this.createFilter(s.filterId,s.title,s.nickname,s.specialization,!1,!1,s.lastUpdateTime,s.RuleCount,s.subscriptionUrl,s.version))}return r}},I.YiclearFilter=function(e){this.filterId=e,this.name=null,this.description=null,this.version=null,this.lastUpdateTime=null,this.lastCheckTime=null,this.enabled=!1,this.subscriptionUrl=null,this.version=null};var l=I.FilterLSUtils={FILTERS_STATE_PROP:"filters-state",FILTERS_VERSION_PROP:"filters-version",getFiltersVersionInfo:function(){var t=o.Log,e=o.LocalStorage,i=Object.create(null);try{var r=e.getItem(l.FILTERS_VERSION_PROP);r&&(i=JSON.parse(r))}catch(e){t.error("Error retrieve filters version info, cause {0}",e)}return i},getFiltersStateInfo:function(){var t=o.Log,e=o.LocalStorage,i=Object.create(null);try{var r=e.getItem(l.FILTERS_STATE_PROP);r&&(i=JSON.parse(r))}catch(e){t.error("Error retrieve filters state info, cause {0}",e)}return i},updateFilterVersionInfo:function(e){var t=l.getFiltersVersionInfo(),i=o.LocalStorage;t[e.filterId]={version:e.version,lastCheckTime:e.lastCheckTime,lastUpdateTime:e.lastUpdateTime},i.setItem(l.FILTERS_VERSION_PROP,JSON.stringify(t))},updateFilterStateInfo:function(e){var t=l.getFiltersStateInfo(),i=o.LocalStorage;t[e.filterId]={loaded:e.loaded,enabled:e.enabled,installed:e.installed},i.setItem(l.FILTERS_STATE_PROP,JSON.stringify(t))}}}(yiclearAPI,vAPI);