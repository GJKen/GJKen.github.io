!function(){var s={img:"IMAGE",input:"IMAGE",audio:"MEDIA",video:"MEDIA",object:"OBJECT",frame:"SUBDOCUMENT",iframe:"SUBDOCUMENT",embed:"OBJECT"},a=!1,o=["mail.google.com","inbox.google.com","productforums.google.com"],t=["docs.google.com"],r=Object.create(null),i=1,c=null,d=!1;contentPage.onMessage.addListener(function(e,t,n){if("injectScripts"===e.type){if(n({applied:!0}),!l())return;y(e.scripts)}});var e=function(){if(l()){f(),(c=document.documentElement.shadowRoot)||"createShadowRoot"in document.documentElement&&-1===o.indexOf(document.domain)&&((c=document.documentElement.createShadowRoot()).appendChild(document.createElement("shadow")),p());var e=navigator.userAgent.toLowerCase();if(-1<e.indexOf("firefox"),-1<e.indexOf("opera")||-1<e.indexOf("opr"),window!==window.top){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0);d=n*t<1e5}x(),v()}},l=function(){return document instanceof HTMLDocument||document instanceof XMLDocument&&document.createElement("div")instanceof HTMLDivElement},u=function(){return"("+function(){var e=document.currentScript,t=e&&e.parentNode;t&&t.removeChild(e)}.toString()+")();"},m=function(e){if(e&&0!==e.length){e.unshift("try {"),e.push("} catch (ex) { console.error('Error executing Yiclear js: ' + ex); };"),e.push(u());var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.textContent=e.join("\r\n"),(document.head||document.documentElement).appendChild(t)}},f=function(){var e;if((0===(e=window.location.protocol).indexOf("http")||0===e.indexOf("about:"))&&(-1===(t=window.location.host).indexOf("taobao.com")&&-1===t.indexOf("tmall.com")&&-1===t.indexOf("alipay.com")&&-1===t.indexOf("1688.com")&&-1===t.indexOf("dingtalk.com"))){var t,n=function(){if(contentPage.isSafari)return!contentPage.isSafariContentBlockerEnabled;var e=navigator.userAgent.toLowerCase();if(0<=e.indexOf("firefox"))return!1;var t=e.indexOf("chrome/");if(t<0)return!1;var n=e.substring(t+7);return 45<=Number.parseInt(n.substring(0,n.indexOf(".")))}(),o=!contentPage.isSafari||!contentPage.isSafariContentBlockerEnabled;if(n||o){initPageMessageListener();var r="wrapper-script-"+Math.random().toString().substr(2),a="("+injectPageScriptAPI.toString()+")('"+r+"', "+n+", "+o+");";m([a])}}},p=function(){var e="("+function(){if("shadowRoot"in Element.prototype){var t=document.documentElement.shadowRoot;if(t){var e=Object.getOwnPropertyDescriptor(Element.prototype,"shadowRoot"),n=Function.prototype.call.bind(e.get);Object.defineProperty(Element.prototype,"shadowRoot",{configurable:!0,enumerable:!0,get:function(){var e=n(this);return e===t?null:e}})}}}.toString()+")();",t="("+function(){Object.defineProperty(window.HTMLStyleElement.prototype,"disabled",{get:function(){return!1},set:function(e){}})}.toString()+")();";m([e,t])},v=function(){var e={type:"getSelectorsAndScripts",documentUrl:window.location.href,options:{filter:["selectors","scripts"],genericHide:d}};contentPage.sendMessage(e,n)},n=function(e){e&&!1!==e.requestFilterReady?(e.collapseAllElements?(g(e.selectors,e.useShadowDom),y(e.scripts),D()):(g(e.selectors,e.useShadowDom),y(e.scripts)),e&&e.selectors&&e.selectors.css&&0<e.selectors.css.length&&function(){if(window===window.top){var n=t.indexOf(document.domain)<0,o="iframe[src]:not([allowfullscreen])";n&&ElementCollapser.hideBySelector(o,null,c);var d=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var n=e[t].target;n&&L(n)}}),s={attributes:!0,attributeFilter:["src"]},r=function(e){for(var t=[],n=0;n<e.length;n++)for(var o=e[n].addedNodes,r=0;r<o.length;r++){var a=o[r];"iframe"===a.localName&&t.push(a)}if(0<t.length)for(var i=t.length;i--;){var c=t[i];L(c),d.observe(c,s)}},e=function(){for(var e=document.getElementsByTagName("iframe"),t=0;t<e.length;t++)L(e[t]);n&&ElementCollapser.unhideBySelector(o,c),document.body&&new MutationObserver(r).observe(document.body,{childList:!0,subtree:!0})};0<=["interactive","complete"].indexOf(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)}}(),"undefined"!=typeof CssHitsCounter&&"function"==typeof CssHitsCounter.count&&e&&e.selectors&&e.selectors.cssHitsCounterEnabled&&CssHitsCounter.count()):setTimeout(function(){v()},100)},g=function(e,t){e&&(h(e.css,t),w(e.extendedCss))},h=function(e,t){var n,o;if(e&&0!==e.length)for(var r=0;r<e.length;r++){var a=document.createElement("style");a.setAttribute("type","text/css"),n=a,o=e[r],t&&!c&&(o=o.replace(new RegExp("::content ","g"),"")),n.textContent=o,t&&c?c.appendChild(a):(document.head||document.documentElement).appendChild(a),E(a,t),b(a)}},w=function(e){e&&e.length&&new ExtendedCss(e.join("\n")).apply()},b=function(a){var e=window.MutationObserver||window.WebKitMutationObserver;e&&new e(function(e){for(var t=0;t<e.length;t++){var n=e[t];if(a.hasAttribute("mod")&&"inner"==a.getAttribute("mod")){a.removeAttribute("mod");break}a.setAttribute("mod","inner");var o=!1;if(0<n.removedNodes.length)for(var r=0;r<n.removedNodes.length;r++)o=!0,a.appendChild(n.removedNodes[r]);else n.oldValue&&(o=!0,a.textContent=n.oldValue);o||a.removeAttribute("mod")}}).observe(a,{childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0})},E=function(a,i){var e=window.MutationObserver||window.WebKitMutationObserver;if(e){var c=new e(function(e){for(var t=0;t<e.length;t++){var n=e[t],o=[].indexOf.call(e[t].removedNodes,a);if(-1!==o){var r=n.removedNodes[o];c.disconnect(),h([r.textContent],i);break}}});c.observe(a.parentNode,{childList:!0,characterData:!0})}},y=function(e){if(!a&&(a=!0,e&&0!==e.length)){for(var t=[],n=0;n<e.length;n++){var o=e[n];switch(o.scriptSource){case"local":case"remote":t.push(o.rule)}}if(0!==t.length){var r="text/xml"===document.contentType?document.createElementNS("http://www.w3.org/1999/xhtml","script"):document.createElement("script");t.unshift("try {"),t.push("} catch (ex) { console.error('Error executing yiclear js: ' + ex); }"),t.push(u()),r.textContent=t.join("\r\n"),(document.head||document.body||document.documentElement||document).appendChild(r)}}},x=function(){document.addEventListener("error",C,!0),document.addEventListener("load",C,!0)},C=function(e){var t=e.target,n=e.type,o=t.tagName.toLowerCase();n===("iframe"===o||"frame"===o||"embed"===o?"load":"error")&&("undefined"!=typeof sogouExplorer&&"Other"===sogouExplorer.loadTimes().navigationType||L(t))},O=function(e){var t=e.src||e.data;return t&&0===t.indexOf("http")&&t!==e.baseURI?t:null},S=function(e){var t=e.tagName.toLowerCase(),n=i++;return r[n]={element:e,src:e.src,tagName:t},n},M=function(e){if(e){var t=r[e.requestId];if(t){delete r[e.requestId];var n=t.element;if(!0===e.collapse){var o=t.src;ElementCollapser.collapseElement(n,o,c)}ElementCollapser.unhideElement(n,c)}}},N=function(){void 0===window.contentPage&&(window.contentPage={sendMessage:yiclearCommon.SendMessageFunction,onMessage:new yiclearCommon.OnMessageEvent})},L=function(e){var t=s[e.localName];if(t){var n=O(e);if(n){var o=S(e);!function(e){if("iframe"===e.localName||"frame"===e.localName||"embed"===e.localName){if(12e4<e.clientHeight*e.clientWidth)return;if(e.hasAttribute("allowfullscreen"))return}"embed"===e.localName&&"image/svg+xml"===e.type||ElementCollapser.hideElement(e,c)}(e);var r={type:"processShouldCollapse",elementUrl:n,documentUrl:document.URL,requestType:t,requestId:o};N(),contentPage.sendMessage(r,M)}}},A=function(e){if(e)for(var t=e.requests,n=0;n<t.length;n++){var o=t[n];M(o)}},P=function(){var e=[];for(var t in s)for(var n=s[t],o=document.getElementsByTagName(t),r=0;r<o.length;r++){var a=o[r],i=O(a);if(i){var c=S(a);e.push({elementUrl:i,requestType:n,requestId:c,tagName:t})}}var d={type:"processShouldCollapseMany",requests:e,documentUrl:document.URL};N(),contentPage.sendMessage(d,A)},D=function(){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?P():document.addEventListener("DOMContentLoaded",P)},T=function(){!1===document.hidden&&(document.removeEventListener("visibilitychange",T),e())};contentPage.isSafari&&document.hidden?document.addEventListener("visibilitychange",T):e()}();